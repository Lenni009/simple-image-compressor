(function(r,n){typeof exports=="object"&&typeof module<"u"?n(exports):typeof define=="function"&&define.amd?define(["exports"],n):(r=typeof globalThis<"u"?globalThis:r||self,n(r.imageCompressor={}))})(this,function(r){"use strict";const n={WEBP:"image/webp",JPEG:"image/jpeg"},a="b25tZXNzYWdlID0gYXN5bmMgKHsgZGF0YTogdCB9KSA9PiB7CiAgdHJ5IHsKICAgIGNvbnN0IGUgPSB7CiAgICAgIHN0YXR1czogInN1Y2Nlc3MiLAogICAgICBkYXRhOiBhd2FpdCBjKHQpCiAgICB9OwogICAgcG9zdE1lc3NhZ2UoZSk7CiAgfSBjYXRjaCAocykgewogICAgY29uc3QgciA9IHsKICAgICAgc3RhdHVzOiAiZXJyb3IiLAogICAgICBkYXRhOiBgQ291bGQgbm90IGNvbXByZXNzISAke3MgaW5zdGFuY2VvZiBFcnJvciA/IHMubWVzc2FnZSA6ICIifWAKICAgIH07CiAgICBwb3N0TWVzc2FnZShyKTsKICB9IGZpbmFsbHkgewogICAgY2xvc2UoKTsKICB9Cn07CmFzeW5jIGZ1bmN0aW9uIGMoeyBmaWxlOiB0LCBjb25maWc6IHMgfSkgewogIGNvbnN0IGUgPSBhd2FpdCBjcmVhdGVJbWFnZUJpdG1hcCh0KSwgeyB3aWR0aDogciwgaGVpZ2h0OiBuIH0gPSBlLCBvID0gbmV3IE9mZnNjcmVlbkNhbnZhcyhyLCBuKSwgYSA9IG8uZ2V0Q29udGV4dCgiYml0bWFwcmVuZGVyZXIiKTsKICByZXR1cm4gYSA9PSBudWxsIHx8IGEudHJhbnNmZXJGcm9tSW1hZ2VCaXRtYXAoZSksIGUuY2xvc2UoKSwgYXdhaXQgby5jb252ZXJ0VG9CbG9iKHMpOwp9Cg==",d=o=>Uint8Array.from(atob(o),e=>e.charCodeAt(0)),c=typeof window<"u"&&window.Blob&&new Blob(["URL.revokeObjectURL(import.meta.url);",d(a)],{type:"text/javascript;charset=utf-8"});function i(o){let e;try{if(e=c&&(window.URL||window.webkitURL).createObjectURL(c),!e)throw"";const t=new Worker(e,{type:"module",name:o==null?void 0:o.name});return t.addEventListener("error",()=>{(window.URL||window.webkitURL).revokeObjectURL(e)}),t}catch{return new Worker("data:text/javascript;base64,"+a,{type:"module",name:o==null?void 0:o.name})}}async function I(o){return new Promise((e,t)=>{const s=new i;s.postMessage(o),s.onmessage=({data:g})=>{if(g.status==="error")console.error(g.data),t(g.data);else{const m=g.data;e(m)}}})}async function b(o,e={}){e.type??(e.type=n.JPEG),e.quality??(e.quality=.92);const t={originalType:o.type,...e};return await I({file:o,config:t})}r.compressImage=b,r.imageTypes=n,Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})});
