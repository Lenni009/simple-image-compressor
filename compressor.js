(function(o,n){typeof exports=="object"&&typeof module<"u"?n(exports):typeof define=="function"&&define.amd?define(["exports"],n):(o=typeof globalThis<"u"?globalThis:o||self,n(o.imageCompressor={}))})(this,function(o){"use strict";const n={WEBP:"image/webp",JPEG:"image/jpeg"},a="b25tZXNzYWdlID0gYXN5bmMgKHsgZGF0YTogdCB9KSA9PiB7CiAgdHJ5IHsKICAgIGNvbnN0IGUgPSB7CiAgICAgIHN0YXR1czogInN1Y2Nlc3MiLAogICAgICBkYXRhOiBhd2FpdCBjKHQpCiAgICB9OwogICAgcG9zdE1lc3NhZ2UoZSk7CiAgfSBjYXRjaCAocykgewogICAgY29uc3QgciA9IHsKICAgICAgc3RhdHVzOiAiZXJyb3IiLAogICAgICBkYXRhOiBgQ291bGQgbm90IGNvbXByZXNzISAke3MgaW5zdGFuY2VvZiBFcnJvciA/IHMubWVzc2FnZSA6ICIifWAKICAgIH07CiAgICBwb3N0TWVzc2FnZShyKTsKICB9IGZpbmFsbHkgewogICAgY2xvc2UoKTsKICB9Cn07CmFzeW5jIGZ1bmN0aW9uIGMoeyBmaWxlOiB0LCBjb25maWc6IHMgfSkgewogIGNvbnN0IGUgPSBhd2FpdCBjcmVhdGVJbWFnZUJpdG1hcCh0KSwgeyB3aWR0aDogciwgaGVpZ2h0OiBuIH0gPSBlLCBvID0gbmV3IE9mZnNjcmVlbkNhbnZhcyhyLCBuKSwgYSA9IG8uZ2V0Q29udGV4dCgiYml0bWFwcmVuZGVyZXIiKTsKICByZXR1cm4gYSA9PSBudWxsIHx8IGEudHJhbnNmZXJGcm9tSW1hZ2VCaXRtYXAoZSksIGUuY2xvc2UoKSwgYXdhaXQgby5jb252ZXJ0VG9CbG9iKHMpOwp9Cg==",d=r=>Uint8Array.from(atob(r),e=>e.charCodeAt(0)),c=typeof window<"u"&&window.Blob&&new Blob(["URL.revokeObjectURL(import.meta.url);",d(a)],{type:"text/javascript;charset=utf-8"});function i(r){let e;try{if(e=c&&(window.URL||window.webkitURL).createObjectURL(c),!e)throw"";const t=new Worker(e,{type:"module",name:r==null?void 0:r.name});return t.addEventListener("error",()=>{(window.URL||window.webkitURL).revokeObjectURL(e)}),t}catch{return new Worker("data:text/javascript;base64,"+a,{type:"module",name:r==null?void 0:r.name})}}async function I(r){return new Promise((e,t)=>{const s=new i;s.postMessage(r),s.onmessage=({data:g})=>{if(g.status==="error")console.error(g.data),t(new Error(g.data));else{const m=g.data;e(m)}}})}async function b(r,e={}){e.type??(e.type=n.JPEG),e.quality??(e.quality=.92);const t={originalType:r.type,...e};return await I({file:r,config:t})}o.compressImage=b,o.imageTypes=n,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})});
